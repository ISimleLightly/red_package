<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>RedPackage</title>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
</head>
<body>
    <div class="container">
    	<a href="javascript:send();">发红包</a>
        <a href="javascript:grab();">测试抢红包</a>
        <a href="javascript:grabByRedis();">测试抢红包(redis)</a>
    </div>
<script type="text/javascript">
	function grab() {
		for(var i = 0; i < 30000; i ++) {
	        $.ajax({
	            url: "http://localhost:8081/redPackage/grab",
	            type: "post",
	            dataType: "json",
	            data: {
	                "redPackageId": "dafecd3e-c963-4734-8e49-be99559d7178",
	                "userId": i
	            }
	        })
	    }
	}
	
	function grabByRedis() {
		for(var i = 0; i < 80000; i ++) {
	        $.ajax({
	            url: "http://localhost:8081/redPackage/grab/redis",
	            type: "post",
	            dataType: "json",
	            data: {
	                "redPackageId": "dafecd3e-c963-4734-8e49-be99559d7178",
	                "userId": i
	            }
	        })
	    }
	}
	
	function send() {
		$.ajax({
			url: "http://localhost:8081/redPackage/send",
			type: "post",
			dataType: "json",
			data: {
				"userId": "test",
				"amount": 100,
				"number": 10
			},
			success: function(data) {
				if (data.code == 0) {
					alert(data.msg);
				}
			}
		})
	}
</script>
</body>
</html>